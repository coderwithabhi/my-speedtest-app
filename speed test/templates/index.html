<!DOCTYPE html>
<html lang="en">
<head>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>SpeedTest Pro - Fast & Accurate Internet Speed Test</title>
    <meta name="description" content="SpeedTest Pro: Check your internet download and upload speed instantly. Fast, accurate, and free tool to test your connection ping and latency.">
    <meta name="keywords" content="speed test, internet speed check, wifi speed test, mbps checker, ping test, SpeedTest Pro">
    <meta name="author" content="SpeedTest Pro">

    <meta property="og:title" content="SpeedTest Pro - Fast & Accurate Internet Speed Test">
    <meta property="og:description" content="Check your internet speed with one click. Get real-time download, upload, and ping results.">
    <meta property="og:url" content="https://speedtest-pro-abhi.onrender.com/">
    <meta property="og:type" content="website">

    <link rel="icon" type="image/png" href="/speedtest-logo.png?v=1">
</head>


<script src="https://cdn.jsdelivr.net/npm/gaugeJS/dist/gauge.min.js"></script>

<style>
/* --- AAPKA PURANA CSS --- */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    font-family: sans-serif;
    background: #f0f4f8;
    display: flex;
    flex-direction: column; /* Isse content niche aayega */
    align-items: center;
    min-height: 100vh;
    padding: 20px;
}
.dashboard {
    background: white;
    padding: 40px 20px;
    border-radius: 24px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.05);
    width: 100%;
    max-width: 500px;
    text-align: center;
    margin-bottom: 40px; /* Tool ke niche gap */
}
.gauge-box {
    position: relative;
    margin: 20px auto;
    max-width: 300px;
}
canvas {
    width: 100%!important;
    height: 160px!important;
}
#speed-display {
    font-size: 3.5rem;
    font-weight: 800;
    color: #2563eb;
    margin-top: -25px;
}
#test-btn {
    background: #2563eb;
    color: white;
    border: none;
    padding: 18px 0;
    font-size: 1.1rem;
    border-radius: 16px;
    cursor: pointer;
    width: 100%;
    max-width: 320px;
    margin-top: 25px;
    font-weight: 600;
}
#test-btn:disabled {
    background: #cbd5e1;
}
.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 35px;
    border-top: 1px solid #f1f5f9;
    padding-top: 30px;
}
.box {
    background: #f8fafc;
    padding: 15px;
    border-radius: 12px;
}

/* --- NAYA CONTENT CSS (For AdSense) --- */
.seo-content {
    max-width: 800px;
    width: 100%;
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.03);
    color: #334155;
    line-height: 1.8;
}
.seo-content h2 { color: #1e293b; margin: 25px 0 10px; border-bottom: 2px solid #f1f5f9; padding-bottom: 5px; }
.seo-content p { margin-bottom: 15px; font-size: 1rem; }
footer { margin-top: 40px; padding: 20px; color: #94a3b8; font-size: 0.9rem; text-align: center; }
footer a { color: #2563eb; text-decoration: none; margin: 0 10px; }

@media (max-width: 480px) {
    .grid { grid-template-columns: 1fr; }
}
</style>
</head>

<body>

<div class="dashboard">
    <h1>Internet Speed Test</h1>

    <div class="gauge-box">
        <canvas id="gauge-canvas"></canvas>
        <div id="speed-display">0.00</div>
        <div style="color:#64748b;">Mbps</div>
    </div>

    <button id="test-btn" onclick="startTest()">Check Speed Now</button>

    <div class="grid">
        <div class="box"><p style="color:#94a3b8;font-size:0.7rem;">DOWNLOAD</p><b id="dl">--</b> Mbps</div>
        <div class="box"><p style="color:#94a3b8;font-size:0.7rem;">UPLOAD</p><b id="ul">--</b> Mbps</div>
        <div class="box" style="grid-column: span 2;">
            <p style="color:#94a3b8;font-size:0.7rem;">PING</p><b id="pg">--</b> ms
        </div>
    </div>
</div>

<div class="seo-content">
    <h2>Apna Internet Speed Kaise Check Karein?</h2>
    <p>Hamara <strong>SpeedTest Pro</strong> tool aapko real-time mein aapke connection ki sateek jankari deta hai. Bas "Check Speed Now" button par click karein aur kuch hi seconds mein apna Download speed, Upload speed aur Ping check karein.</p>

    <h2>Download vs Upload Speed: Kya Antar Hai?</h2>
    <p><strong>Download Speed:</strong> Yeh batata hai ki aap internet se kitni jaldi data prapt kar rahe hain. High download speed Netflix streaming aur file downloading ke liye zaroori hai.</p>
    <p><strong>Upload Speed:</strong> Jab aap kisi ko file bhejte hain ya video call karte hain, toh upload speed kaam aati hai. Youtubers aur gamers ke liye achhi upload speed hona anivarya hai.</p>

    <h2>Ping aur Jitter Kya Hota Hai?</h2>
    <p>Ping (Latency) aapke connection ka response time hota hai. Agar aap online gaming karte hain (jaise BGMI ya Free Fire), toh aapka ping kam (20ms-50ms) hona chahiye. Zyada ping ka matlab hai "Lag" hona.</p>

    <h2>Slow Internet Ko Fast Kaise Karein?</h2>
    <ul>
        <li>Apne Router ko restart karein.</li>
        <li>Background mein chal rahe faltu apps ko band karein.</li>
        <li>Ethernet cable ka use karein agar aap PC par hain.</li>
        <li>Check karein ki kahin koi software update toh nahi ho raha.</li>
    </ul>
</div>

<footer>
    <p>&copy; 2026 SpeedTest Pro. All rights reserved.</p>
    <p>
        <a href="/privacy">Privacy Policy</a> | 
        <a href="/contact">Contact Us</a>
        <a href="/terms">terms</a>
    </p>
</footer>
<script>
// (Aapka Gauge aur startTest wala script yahan waisa hi rahega)
var opts = {
    angle: 0,
    lineWidth: 0.2,
    radiusScale: 1,
    pointer: { length: 0.6, strokeWidth: 0.035, color: '#1e293b' },
    colorStart: '#2563eb',
    colorStop: '#93c5fd',
    strokeColor: '#e2e8f0',
    generateGradient: true,
    highDpiSupport: true,
    staticLabels: {
        font: "10px sans-serif",
        labels: [0, 20, 40, 60, 80, 100],
        color: "#64748b"
    }
};

var target = document.getElementById('gauge-canvas');
var gauge = new Gauge(target).setOptions(opts);
gauge.maxValue = 100;
gauge.setMinValue(0);
gauge.animationSpeed = 45;
gauge.set(0);

async function startTest() {
    const btn = document.getElementById('test-btn');
    const display = document.getElementById('speed-display');
    const dlDisplay = document.getElementById('dl');
    const ulDisplay = document.getElementById('ul');
    const pgDisplay = document.getElementById('pg');

    // UI Reset
    gauge.set(0);
    btn.disabled = true;
    btn.innerText = "Testing...";
    display.innerText = "0.00";

    try {
        // 1. PING TEST
        const pStart = Date.now();
        // Local server ko hi ping karenge SSL error se bachne ke liye
        await fetch('/?t=' + pStart);
        const pingTime = Date.now() - pStart;
        pgDisplay.innerText = pingTime + " ms";

        // 2. REAL DOWNLOAD TEST (Cloudflare Bypass SSL Issues)
        const dlStart = Date.now();
        // Cloudflare ka link sabse fast aur secure hai
        const response = await fetch('https://speed.cloudflare.com/__down?bytes=10485760', {
            mode: 'cors',
            cache: 'no-store'
        });

        if (!response.ok) throw new Error("Download Failed");

        const reader = response.body.getReader();
        let received = 0;

        // Streaming Logic: Isse gauge live update hoga
        while(true) {
            const {done, value} = await reader.read();
            if (done) break;
            received += value.length;
            
            const currentTime = Date.now();
            const durationSoFar = (currentTime - dlStart) / 1000 || 0.1;
            const currentMbps = ((received * 8) / (durationSoFar * 1024 * 1024)).toFixed(2);
            
            // Gauge update har thodi der mein
            if (received % 50 === 0) gauge.set(Math.min(currentMbps, 100));
            display.innerText = currentMbps;
        }

        const dlEnd = Date.now();
        const dlDuration = (dlEnd - dlStart) / 1000;
        const dlMbps = ((received * 8) / (dlDuration * 1024 * 1024)).toFixed(2);
        
        dlDisplay.innerText = dlMbps;
        display.innerText = dlMbps;
        gauge.set(Math.min(dlMbps, 100));

        // 3. REAL UPLOAD TEST
        btn.innerText = "Testing Upload...";
        const ulStart = Date.now();
        const dummy = new Uint8Array(1024 * 1024 * 2); // 2MB dummy data
        
        // Relative path use karenge (Local aur Render dono ke liye)
        const ulResponse = await fetch('/upload-test', { 
            method: 'POST', 
            body: dummy,
            headers: { 'Content-Type': 'application/octet-stream' }
        });

        if (!ulResponse.ok) throw new Error("Upload Failed");

        const ulEnd = Date.now();
        const ulDuration = (ulEnd - ulStart) / 1000 || 0.1; 
        const ulMbps = ((dummy.length * 8) / (ulDuration * 1024 * 1024)).toFixed(2);
        ulDisplay.innerText = ulMbps;

    } catch (e) {
        console.error("Test Error:", e);
        // Agar SSL/Date error abhi bhi hai toh alert dikhayega
        alert("Speed Test Error: Please check your internet connection or browser security settings.");
    } finally {
        btn.disabled = false;
        btn.innerText = "Check Speed Now";
    }
}
</script>
</body>
</html>